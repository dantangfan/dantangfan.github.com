<!DOCTYPE html>
<html>
<head>
    <!--
    * Author:         dantangfan
    -->
    <meta charset="utf-8" />
    <title>python小技巧 |  dantangfan </title>
    <meta name="author" content="dantangfan" />
    <meta name="description" content="hj's Blog" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <link rel="stylesheet" href="/css/default.css" type="text/css" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
    <link rel="alternate" type="application/atom+xml" title="Recent Entries" href="/atom.xml" />
    <script src="/js/jquery-1.7.1.min.js" type="text/javascript"></script>
</head>
<body>

    <div class="home-menu">
        <div class="home-icon-con">
            <a class="home-menu-icon" href="/">dantangfan</a>
            <a class="home-follow" href="#" title="Contact Me">+</a>
        </div>
        <div class="home-contact">
            <a href="http://weibo.com/u/2428228892/" target="_blank" style="margin-left:-5px;"><img src="http://www.weibo.com/favicon.ico" alt="" width="25"/></a>
            <a href="https://github.com/dantangfan/" target="_blank" style="text-align:center;"><img src="https://github.com/favicon.ico" alt="" width="22"/></a>
            <a href="http://renren.com/419506097" target="_blank" style="text-align:right"><img src="http://iconpng.com/png/website_icons/renren.png" alt="" width="22"/></a>
        </div>
    </div>

    <link rel="stylesheet" href="/js/prettify/prettify.css" />
<style type="text/css">
    body { background:#e8e8e8; }
    @media screen and (max-width: 750px){
        body { background:#fff; }
    }
    @media screen and (max-width: 1020px){
        body { background:#fff; }
    }
</style>

<div id="content">
    <div class="entry">
        <h1 class="entry-title"><a href="/python-skills" title="python小技巧">python小技巧</a></h1>
        <p class="entry-date">2015-02-04</p>
        <h4>迭代一个列表</h4>

<p>```python
string=['a','b','c']
for index in range(len(string)):</p>

<pre><code>print index, string[index]
</code></pre>

<p>```</p>

<p>可以使用</p>

<p>```python
string=['a','b','c']
for index, item in enumerate(string):</p>

<pre><code>pring index, item
</code></pre>

<p>```</p>

<h4>检查列表中的每个元素</h4>

<p>```python
numbers = [10,100,1000,10000]
if [number for numeber in numbers if number&lt;10000]:</p>

<pre><code>print "at list one small than 10000"
</code></pre>

<p>```</p>

<p>可以使用</p>

<p>```python
numbers = [10,100,1000,10000]
if any(number &lt; 10000 for number in numbers):</p>

<pre><code>print "at list one small than 10000"
</code></pre>

<p>```
类似的</p>

<p>```python
numbers = [10,100,1000,10000]
if all(number &lt; 10000 for number in numbers):</p>

<pre><code>print "all small than 10000"
</code></pre>

<p>```</p>

<h2>函数</h2>

<h4>默认值只被计算一次</h4>

<p>在python中，函数的默认值是在函数定义的时候实例化的，而不是在函数调用的时候！所以会出现下面结果</p>

<p>```python
def func(item, stuff=[]):</p>

<pre><code>stuff.append(item)
print stuff
</code></pre>

<p>func(1)</p>

<h1>print "[1]"</h1>

<p>func(2)</p>

<h1>print "[1,2]"</h1>

<p>```</p>

<p>```python
def foo(number=[]):</p>

<pre><code>number.append(9)
print number
</code></pre>

<p>foo()</p>

<h1>[9]</h1>

<p>foo([1,2])</p>

<h1>[1,2,9]</h1>

<p>foo()</p>

<h1>[9]</h1>

<p>foo()</p>

<h1>[9,9]</h1>

<p>foo()</p>

<h1>[9,9,9]</h1>

<p>```</p>

<p>我们需要理解的是，调用函数的时候，这个默认值会被赋成不同值是因为每次在给函数指定一个默认值的时候，python都会储存这个值。如果在调用函数的时候重写了默认值，那么这个储存的值就不会被使用。当你不重写默认值的时候，python就会让默认值引用储存的值（例子中的number）。它并不是将存储的值拷贝来为这个变量赋值，可以这样理解：有两个变量，一个是内部的，一个是当前运行时的变量。现实就是我们有两个变量来用相同的值进行交互，所以一旦number发生变化，也会改变python里面保存的初始记录。</p>

<p>但是问题不是我们想想那么简单的，比如下面</p>

<p>```python
def foo(count=0):</p>

<pre><code>count+=1
print count
</code></pre>

<p>foo()</p>

<h1>1</h1>

<p>foo()</p>

<h1>1</h1>

<p>```</p>

<p>为什么上面函数运行的时候又是符合预期的呢？原因很简单，整形是一种不可变的类型，跟list不同，在函数的执行过程中，整形变量是不能被改变的。当我们执行count+=1的时候，我们并没有改变count的值，而是将count指向了新的地址；而在前面使用list的时候，我们是直接在当前地址操作了变量。</p>

<p>需要记住的有两个点：</p>

<blockquote><p>在python中，函数的默认值是在函数定义的时候实例化的，而不是在函数调用的时候！</p>

<p>默认值会发生改变，是因为我们直接操作的默认值的地址。</p></blockquote>


        <div id="disqus_container">
            <div style="margin-bottom:20px" class="right">
                <script type="text/javascript" charset="utf-8">
                (function(){
                  var _w = 86 , _h = 16;
                  var param = {
                    url:location.href,
                    type:'6',
                    count:'', /**是否显示分享数，1显示(可选)*/
                    appkey:'', /**您申请的应用appkey,显示分享来源(可选)*/
                    title:'', /**分享的文字内容(可选，默认为所在页面的title)*/
                    pic:'', /**分享图片的路径(可选)*/
                    ralateUid:'2428228892', /**关联用户的UID，分享微博会@该用户(可选)*/
                    language:'zh_cn', /**设置语言，zh_cn|zh_tw(可选)*/
                    rnd:new Date().valueOf()
                  }
                  var temp = [];
                  for( var p in param ){
                    temp.push(p + '=' + encodeURIComponent( param[p] || '' ) )
                  }
                  document.write('<iframe allowTransparency="true" frameborder="0" scrolling="no" src="http://hits.sinajs.cn/A1/weiboshare.html?' + temp.join('&') + '" width="'+ _w+'" height="'+_h+'"></iframe>')
                })()
                </script>
            </div>
            <a href="#" class="comment" onclick="return false;">点击查看评论</a>
            <div id="disqus_thread"></div>
        </div>
    </div>

    <div class="sidenav">
        <iframe width="250" height="100" class="share_self"  frameborder="0" scrolling="no" src="http://widget.weibo.com/weiboshow/index.php?language=&width=250&height=100&fansRow=2&ptype=1&speed=0&skin=1&isTitle=0&noborder=1&isWeibo=0&isFans=0&uid=2428228892&verifier=76bf5e3a&dpc=1"></iframe>
    </div>

    <div class="sidenav">
        <h2>Blog</h2>
        <ul class="artical-list">
        
            <li><a href="/zh-cn-PEP333">PEP333中文概要</a></li>
        
            <li><a href="/python-skills">python小技巧</a></li>
        
            <li><a href="/nothing">博客搬家</a></li>
        
            <li><a href="/command">重用命令记录</a></li>
        
            <li><a href="/server-program-model">服务器编程的几种常见模型</a></li>
        
            <li><a href="/study-tornado">Python Tornado学习</a></li>
        
            <li><a href="/findwork">学习记录</a></li>
        
            <li><a href="/diff-py2-py3">python2.7.x和python3.x的简单区别</a></li>
        
            <li><a href="/linotp">LinOTP简单使用教程</a></li>
        
            <li><a href="/process-signal">进程同步的若干问题</a></li>
        
            <li><a href="/memo">备忘录</a></li>
        
            <li><a href="/python-spider">简单爬虫</a></li>
        
            <li><a href="/learn-python">半天简单总结python</a></li>
        
            <li><a href="/raspberry-car">树莓派制作wifi控制小车</a></li>
        
            <li><a href="/c-memory">c语言学习-内存</a></li>
        
            <li><a href="/C-stander">C 语言编码风格和标准</a></li>
        
            <li><a href="/C-pointer">c语言学习-指针</a></li>
        
            <li><a href="/C-scanf">C语言学习-让人头疼的scanf</a></li>
        
            <li><a href="/learn-gitPage">使用Github Pages建独立博客</a></li>
        
        </ul>

        <h2>Opinion</h2>
        <ul class="artical-list">
        
            <li><a href="/Mybirthday">颓废</a></li>
        
            <li><a href="/yearOf2011">从一个地方到另一个地方</a></li>
        
        </ul>

        
        <a href="/project"><h2>About me</h2></a>
        <!--
        <h2>Project</h2>
        <ul class="artical-list">
        
        </ul>
        -->
    </div>
</div>

<script src="/js/post.js" type="text/javascript"></script>


    <script type="text/javascript">
        $(function(){
            $('.home-follow').click(function(e){
                e.preventDefault();

                if($('.home-contact').is(':visible')){
                    $('.home-contact').slideUp(100);
                }else{
                    $('.home-contact').slideDown(100);
                }
            });
        })
    </script>
</body>
</html>
