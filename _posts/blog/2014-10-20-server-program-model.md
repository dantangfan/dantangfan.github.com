---
layout: post
title: 服务器编程的几种常见模型
description: 高性能的服务器是站点良好运作的基础，文章介绍了几种常见的服务器编程模型。
category: blog
---

废话不说，进入主题，例子都用为代码描述。

## 同步阻塞式

这是最简单的一种IO模型，它就是一个一问一答的形式。多数的python网络编程socket一节都会有一个简单服务器例子，就是这个模型：
```c
bind(serverfd);
listen(serverfd);
while(1):{
    clientfd = accept(serverfd, ...); //接收客户端传来的数据
    read(clientfd, buf, ...); //读取客户端数据
    do_logic(buf); //对数据进行操作，内部逻辑处理
    write(clientfd, buf); //返回客户端数据
}
```

很明显的可以看到，上面有几个地方是需要等待的。
1. 等待客户端请求，如果没有客户端发起请求的话，就会一直等着。
2. 读取客户端数据，建立请求后，就需要等着客户端送来数据(我们知道tcp连接是有几次握手的，所以不能直接来数据)，此时不能接受其他客户端的连接。
3. 同样，写回客户端的时候也需要等待。

## 多进程